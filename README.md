# Raspberry Piで学ぶ！音声認識・IoTハンズオン

このリポジトリは、Raspberry Piを使って音声認識、IoTデバイス制御、Webサービス連携を学ぶハンズオンの資料です。

## 概要

全6限の構成で、音声によるLEDの点灯からSlackへの通知、データ可視化までを段階的に学びます。

**🎯 学習ゴール**
- 音声認識・音声合成の基本的な仕組みを理解する
- 声で身の回りのモノ（IoTデバイス）を操作できるようになる
- Web APIと連携して、音声操作の幅を広げる方法を学ぶ

---

### 1限目：Raspberry Piと音声環境の準備

まずは、ハンズオンの土台となる環境を整えます。Raspberry Piでマイクとスピーカーが使えることを確認し、必要なライブラリを導入します。

**✅ チェックリスト**
- [ ] HDMI（またはイヤホンジャック）から音声が出力できる
- [ ] USBマイク等で音声が入力できる
- [ ] `speaker-test` コマンドでスピーカーの動作確認
- [ ] `arecord` コマンドでマイクの録音テスト
- [ ] 音声認識ライブラリ `Vosk` のモデルをダウンロード
- [ ] 音声合成ライブラリ `OpenJTalk` をインストール
- [ ] `requirements.txt` を使って必要なPythonライブラリをインストール

---

### 2限目：音声認識ハンズオン（Vosk）

`Vosk` を使って、マイクで録音した音声をテキストに変換します。まずは「こんにちは」と話しかけて、正しく文字に起こされることを体験しましょう。

**サンプルコード:** [`2_vosk_recognition.py`](./2_vosk_recognition.py)

> 💡 **ポイント:** `arecord` でマイクから録音した `rec.wav` ファイルをプログラムが読み込んでいます。

---

### 3限目：IoT制御（声でLEDを点灯/消灯）

音声認識とGPIO制御を組み合わせて、声でLEDを操作します。「電気をつけて」「電気を消して」といった言葉に反応するプログラムを作成します。

**🔌 GPIO配線**
- ブレッドボードにLEDと適切な抵抗（例: 330Ω）を接続します。
- LEDのアノード（長い足）をRaspberry PiのGPIO 18番ピンに接続します。
- LEDのカソード（短い足）をGNDピンに接続します。

**サンプルコード:** [`3_led_control.py`](./3_led_control.py)

---

### 4限目：音声合成（OpenJTalk）

今度は逆に、テキストから音声を作り出します。`pyopenjtalk` を使って、Raspberry Piに好きな言葉を話させてみましょう。

**サンプルコード:** [`4_text_to_speech.py`](./4_text_to_speech.py)

> 🗣️ **応用:** 2限目の音声認識結果を、このプログラムに渡してオウム返しさせてみましょう。

---

### 5限目：Slack通知との連携

音声操作の結果をSlackに通知する仕組みを作ります。これにより、外出先からでも家のIoT機器の動作状況を確認できるようになります。

**事前準備**
1.  Slackのワークスペースで「Incoming Webhook」を有効にする。
2.  通知したいチャンネルを選択し、Webhook URLを取得する。

**サンプルコード:** [`5_slack_notification.py`](./5_slack_notification.py)

---

### 6限目：データ可視化と音声操作

`matplotlib` を使ってグラフを作成し、音声操作で表示を切り替えます。さらに、グラフの内容をRaspberry Piに読み上げさせてみましょう。

**サンプルコード:** [`6_data_visualization.py`](./6_data_visualization.py)

> ⚠️ **注意:** `japanize_matplotlib` をインストールしておくと、グラフの日本語が文字化けしません。

---

## 発展課題

- **「会議開始」** という音声コマンドで、Slackに通知し、PCのスライドを自動で起動させる。
- **「今日の天気は？」** と聞くと、天気予報APIを叩いて結果を音声で教えてくれる。
- **モーター**を接続して、声でカーテンの開け閉めを制御する。
